patterns:
- pattern: testing/*
  insights:
  - Tests failed with ModuleNotFoundError because the package wasn't pip-installed
    in the worktree environment. When developing in worktrees, ensure 'pip install
    -e .' is run in each worktree's environment before attempting to run tests. This
    is a common gap when worktrees don't share the same virtualenv.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - testing
  - technical
  sample_count: 1
- pattern: architecture/*
  insights:
  - 'The VerMAS parser follows a clean pattern: (1) find_vermas_directory() locates
    the root, (2) parse_state_directory() iterates workflow dirs, (3) individual methods
    handle each file type (parse_signal_file, parse_events_log, parse_task_file, parse_epic_file).
    This separation makes the parser maintainable and testable.'
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - architecture
  - technical
  sample_count: 1
- pattern: code-review/*
  insights:
  - QA agent identified that discover_sessions missed real Claude session paths and
    parse_session_file wasn't using ClaudeParser, making --include-conversation a
    no-op. These functional integration issues passed unit tests but would have failed
    real-world usage. QA review adds value beyond test coverage.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - code-review
  - technical
  sample_count: 1
- pattern: workflow/*
  insights:
  - 'Workflow completed successfully via quick iteration: dev signaled done (4 tests
    from QA gap), QA sent needs_revision with specific file:line reference, dev fixed
    in 2 minutes and re-signaled done, QA approved. Total revision cycle under 5 minutes.'
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - workflow
  - process
  sample_count: 1
- pattern: reliability/*
  insights:
  - MCP 'Connection refused' errors can cause agents to fail silently without sending
    workflow signals. Monitor MCP server health and implement retry logic. Tmux session
    crashes combined with MCP issues lead to complete coordination failure even when
    code work is successful.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - reliability
  - technical
  sample_count: 1
- pattern: workflow-coordination/*
  insights:
  - The workflow completed in ~9 minutes with two dev-QA cycles. Each QA rejection
    included specific actionable feedback (exact error message, missing files, failing
    test command), and each dev signal included quantifiable proof (test counts, coverage
    percentage). This tight feedback loop enabled fast convergence.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - workflow-coordination
  - process
  sample_count: 1
- pattern: implementation/*
  insights:
  - 'The VerMAS parser implementation demonstrates good patterns: 830 lines of well-structured
    code with Pydantic models (AgentSignal, WorkflowExecution, MissionInfo, KnowledgeImprovement,
    AgentLearning, RecapFile, VermasSession), clear separation of concerns, and robust
    error handling. Test file has 1170 lines covering model creation, directory parsing,
    signal handling, edge cases, and integration scenarios.'
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - implementation
  - technical
  sample_count: 1
- pattern: debugging/*
  insights:
  - Dev signaled done, QA found issues and signaled needs_revision, dev fixed and
    re-signaled done, QA approved - all within one workflow cycle. This tight feedback
    loop (dev fix in ~1 minute after QA review) is more efficient than multi-cycle
    iterations.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - debugging
  - process
  sample_count: 1
- pattern: python/*
  insights:
  - Structure pyproject.toml with core dependencies in [project.dependencies] and
    testing/linting tools in [project.optional-dependencies.dev]. Use 'uv run --extra
    dev pytest' for CI/QA verification. Configure tool settings (pytest, mypy, ruff)
    in the same file.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - python
  - technical
  sample_count: 1
- pattern: agent-lifecycle/*
  insights:
  - Workflows running over 10 minutes need active heartbeat monitoring to detect agent
    death before the full timeout. The dev agent died without signaling, causing the
    workflow to fail silently. Implementing periodic heartbeat checks (every 60-120
    seconds) would allow earlier detection and potential agent restart.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - agent-lifecycle
  - process
  sample_count: 1
- pattern: task-recovery/*
  insights:
  - When an agent dies mid-task, all progress is lost if no intermediate commits exist.
    Agents should checkpoint progress by committing partial work frequently (every
    significant change), enabling workflow resumption from the last checkpoint rather
    than restarting from scratch.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - task-recovery
  - process
  sample_count: 1
- pattern: validation/*
  insights:
  - The improvement logs indicate adding a 'validate' state before 'engineering' helps
    isolate environment/setup issues from implementation issues. Running a single-agent
    validation step first proves the execution environment works before spawning multiple
    agents, reducing complex failure modes.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - validation
  - process
  sample_count: 1
- pattern: code-design/*
  insights:
  - When a parser needs to handle multiple file formats (JSONL and JSON array/object),
    extracting format detection into a private _load_entries() method keeps the main
    parsing logic clean. The method auto-detects format and normalizes to a consistent
    data structure for downstream processing.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - code-design
  - technical
  sample_count: 1
- pattern: parser-implementation/*
  insights:
  - When parsing JSON files that may come from different sources, support common wrapper
    patterns (objects with 'messages', 'entries', or 'conversation' keys) in addition
    to direct arrays. This makes the parser resilient to variations in how tools export
    session data.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - parser-implementation
  - technical
  sample_count: 1
- pattern: workflow-infrastructure/*
  insights:
  - When an agent completes its work and signals done/approved, but its process dies
    before the workflow orchestrator confirms termination, the entire workflow is
    marked as failed despite successful task completion. The orchestrator should check
    for completion signals before flagging agent death as workflow failure.
  revision_rate: null
  success_rate: 0.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - workflow-infrastructure
  - process
  sample_count: 1
- pattern: code-delivery/*
  insights:
  - Code committed to worktree branches does not automatically appear in main. After
    'git commit' in a worktree, you must explicitly merge or cherry-pick to main.
    The task completion signal was sent after the worktree commit, but the merge step
    was skipped, leaving the code stranded in the feature branch.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - code-delivery
  - process
  sample_count: 1
- pattern: verification/*
  insights:
  - The pre-signal-check.sh script verifies tests pass and git status is clean, but
    doesn't verify the deliverable files exist in the target (main) branch. Add a
    check like 'git show main:src/path/to/file.py >/dev/null 2>&1' to confirm code
    was actually merged before signaling 'done'.
  revision_rate: null
  success_rate: 1.0
  avg_duration: null
  recommended_workflow: null
  tags:
  - verification
  - process
  sample_count: 1
